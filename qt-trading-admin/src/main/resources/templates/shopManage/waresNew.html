<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
    <meta charset="utf-8" />
    <title>数据商城管理-数据商品管理</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <meta http-equiv="cache-control" content="no-cache" />
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet" type="text/css" />
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="/css/layout.css" rel="stylesheet" type="text/css" />
    <link href="/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/datatables.min.css">
    <link rel="stylesheet" href="/css/datatables.bootstrap.css">
    <link href="/css/plugins.min.css" rel="stylesheet" type="text/css">
    <link href="/css/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color">
    <script src="/js/jquery.min.js" type="text/javascript"></script>
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">

<!--  页头 -->
<div th:replace="layout/header" /></div>
<!-- 页头结束 -->


<div class="clearfix"> </div>

<div class="page-container">
    <!--侧边栏-->
    <div th:replace="layout/sidebar" /></div>
    <!--侧边栏结束-->

    <!--主体内容-->
    <div class="page-content-wrapper">
        <div class="page-content" style="min-height: 1095px;">
            <!--面包屑-->
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <span>数据商城管理</span>
                        <i class="fa fa-circle"></i>
                    </li>
                    <li>
                        <a href="#" class="active">数据商品管理</a>
                    </li>
                </ul>
            </div>
            <!--面包屑结束-->
            <div class="portlet light portlet-fit portlet-datatable">
                <div class="portlet-body">
                    <div class="table-container">
                        <div id="datatable_ajax_wrapper" class="dataTables_wrapper dataTables_extended_wrapper no-footer">
                            <div class="row">
                                <!--分页展示-->
                                <!--div class="col-md-8 col-sm-12">
                                    <div class="dataTables_paginate paging_bootstrap_extended" id="datatable_ajax_paginate">
                                        <div class="pagination-panel">
                                            当前页
                                            <a href="#" class="btn btn-sm default prev disabled">
                                                <i class="fa fa-angle-left"></i>
                                            </a>
                                            <input type="text" class="pagination-panel-input form-control input-sm input-inline input-mini" maxlenght="5" style="text-align:center; margin: 0 5px;">
                                            <a href="#" class="btn btn-sm default next">
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            共
                                            <span class="pagination-panel-total">18页</span>
                                        </div>
                                    </div>
                                    <div class="dataTables_length" id="datatable_ajax_length">
                                        <label>
                                            <span class="seperator"> | </span>
                                            每页展示
                                            <select name="datatable_ajax_length" aria-controls="datatable_ajax" class="form-control input-xs input-sm input-inline">
                                                <option value="10">10</option>
                                                <option value="20">20</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                                <option value="150">150</option>
                                                <option value="-1">所有</option>
                                            </select>
                                            记录
                                        </label>
                                    </div>
                                    <div class="dataTables_info" id="datatable_ajax_info" role="status" aria-live="polite">
                                        <span class="seperator">| </span>
                                        共找到0条记录
                                    </div>
                                </div>-->
                                <!--分页展示结束-->

                                <!--搜索-->
<!--                                <div class="col-md-2 col-sm-12">
                                    <div class="table-group-actions pull-right">
                                        <input type="text" class="table-group-action-input form-control input-inline input-small input-sm">
                                        <button class="btn btn-sm green table-group-action-submit">搜索</button>
                                    </div>
                                </div>-->
                                <!--搜索结束-->
                            </div>

                            <!--添加按钮-->
                            <div  style="margin: 20px 0 10px 0">
                                <a href="/setUp" class="btn btn-sm blue btn-outline">添加数据产品</a>
                            </div>


                            <!--表格主体-->
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover table-checkable dataTable no-footer" id="datatable_ajax" aria-describedby="datatable_ajax_info" role="grid">
                                    <thead>
                                    <tr role="row" class="heading">
                                        <th width="5%" class="sorting_disabled" rowspan="1" colspan="1">id</th>
                                        <th width="15%" class="sorting_disabled" rowspan="1" colspan="1">产品类型</th>
                                        <th width="10%" class="sorting_disabled" rowspan="1" colspan="1">类别</th>
                                        <th width="20%" class="sorting_disabled" rowspan="1" colspan="1">名称</th>
                                        <th width="10%" class="sorting_disabled" rowspan="1" colspan="1">发布人</th>
                                        <th width="15%" class="sorting_disabled" rowspan="1" colspan="1">时间</th>
                                        <th width="10%" class="sorting_disabled" rowspan="1" colspan="1"> 操作</th>
                                    </tr>
                                    </thead>
                                    <tbody id="item-info">
                                    </tbody>
                                </table>
                            </div>
                            <!--表格主体结束-->
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!--主体内容结束-->
</div>

<script src="/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/js/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="/js/app.min.js" type="text/javascript"></script>
<script src="/js/jquery.blockui.min.js" type="text/javascript"></script>
<script src="/js/jquery.uniform.min.js" type="text/javascript"></script>
<script src="/js/jquery.validate.js" type="text/javascript"></script>
<script src="/js/datatable.js"></script>
<script src="/js/datatables.min.js"></script>
<script src="/js/datatables.bootstrap.js"></script>
<script src="/js/layer.js" type="text/javascript"></script>
<script src="/js/layout.js" type="text/javascript"></script>
<script src="/js/jquery.tmpl.min.js" type="text/javascript"></script>
<script src="/js/shopManage/wares.js"></script>

<!--表格模板-->
<script id="tr_tmpl" type="text/x-jquery-tmpl">
    {{each list}}
            <tr>
                <td class="id">${id}</td>
                <td>${dataTypeProps}</td>
                <td>${dataType}</td>
                <td>${designation}</td>
                <td>${userId}</td>
                <td>${addTime}</td>
                <td rowspan="1" colspan="1">
                    <a href="javascript:void(0)" class="btn btn-sm green btn-outline filter-submit revise">修改</a>
                    {{if isUsed == 1}}
                    <button class="btn btn-sm red btn-outline filter-cancel isUsed" value="${isUsed}">下架</button>
                    {{else}}
                     <button class="btn btn-sm blue btn-outline filter-cancel isUsed" value="${isUsed}">上架</button>
                    {{/if}}
                </td>
            </tr>
     {{/each}}
</script>
<!--表格模板结束-->
<script th:inline="javascript">
    //  ${$item._date(addTime)}
    // 页面请求参数
    var settings = {
        url: "/api/product",            // 请求地址
        tmpl_id: "#tr_tmpl" ,     // jquery template 模板元素，如：#div_id 或 .class_name
        target: "#item-info" ,       // 替换html元素，如：#div_id 或 .class_name
        pager_id: "#pageTool",           // 分页html元素标签
        size: 20    // 每页显示20
    }

    // 初始化数据
  //  pageData.products(settings) ;

</script>
<script th:inline="javascript">
    var EcommerceOrders=function(){

               var a = function(){
                    var e = new Datatable();
                    e.init({
                        src:$("#datatable_ajax"),
                        onSuccess:function(e){

                            alert(e)

                        },
                        onError:function(e){
                        },
                        loadingMessage:"Loading...",
                        dataTable:{
                            lengthMenu:[[10,20,50,100,150,-1],[10,20,50,100,150,"All"]],
                            pageLength:10,
                            pagingType: "bootstrap_extended",
                            ajax:{
                                url:"/api/product",
                                type: "get",
                                error:function () {
                                    alert("加载错误")
                                },
                                success: function (ret) {
                                    var data = ret.pageInfo;
                                    $('#tr_tmpl').tmpl(data).appendTo($('tbody'));
                                }
                            },
                            order:[[1,"asc"]]
                        }})

                    /*e.getTableWrapper().on("click",".table-group-action-submit",function(a){
                        a.preventDefault();
                        var t=$(".table-group-action-input",e.getTableWrapper());
                        if (t.val() != "" && e.getSelectedRowsCount()>0){
                            e.setAjaxParam("customActionType","group_action"),
                            e.setAjaxParam("customActionName",t.val()),
                            e.setAjaxParam("id",e.getSelectedRows()),
                            e.getDataTable().ajax.reload(),
                            e.clearAjaxParams()
                        }else if(t.val() == ""){
                            alert({
                                type:"danger",
                                icon:"warning",
                                message:"Please select an action",
                                container:e.getTableWrapper(),
                                place:"prepend"
                            })
                        }else if(e.getSelectedRowsCount() === 0){
                            alert({
                                type:"danger",
                                icon:"warning",
                                message:"No record selected",
                                container:e.getTableWrapper(),
                                place:"prepend"
                            })
                        }
                    })*/
                };
        return{init:function(){a()}}
    }();
    jQuery(document).ready(function(){EcommerceOrders.init()});

</script>
</body>
</html>