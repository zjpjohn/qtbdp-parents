<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 引入header布局 -->
    <top th:replace="layout/top"></top>
    <!-- 页面自定义css、js  -->
    <title>数据商城列表</title>
    <meta name="keywords" content="钱塘大数据交易中心" />
    <meta name="description" content="钱塘大数据交易中心 数据商城" />

    <link rel="stylesheet" th:href="@{/tradecenter/css/dataMartList.css}" />
</head>
<body >
    <!-- 页头-->
    <!--<div th:replace="layout/header" />-->
    <div th:include="layout/header::#head" ></div>
    <!--页头结束-->

    <!--banner图 -->
    <div class="banner"> </div>

    <!--主体-->
    <section class="datamart_main floating main">
        <!--左侧分类-->
        <div class="lf main_lf">
            <!--<p>全部分类</p>-->
            <ul class="data_sort">
                <li><a th:href="@{/datamart}" th:class="${currentid} ? null : 'active'" data-id="0">全部分类 </a></li>
                <li th:each="list : ${typeModels}">
                    <a th:href="@{/datamart}+'/'+${list.id}" th:text="${list.name}" th:attr="data-id=${list.id}" th:class="${currentid} == ${list.id} ? 'active'">智能制造 </a>
                </li>
            </ul>
        </div>
        <!--右侧-->
        <div class="lf">
            <!--右侧分类-->
            <ul class="sub_sort">
                <li class="priceStyle" th:each="attr : ${attrModels}">
                    <span th:text="${attr.name}+' ：'" th:object="${attr.attrVals}">计价方式 ：</span>
                    <a href="javascript:;" class="a1 active" >不限</a>
                    <a th:each="val : ${attr.attrVals}" href="javascript:;" th:text="${val.name}" th:attr="data-id=${val.id}">免费</a>
                </li>
                <li class="sortStyle">
                    <span>排序方式 ：</span>
                    <a href="javascript:;" class="a1 active">最新</a>
                    <a href="javascript:;" data-id="1">价格</a>
                    <a href="javascript:;" data-id="2">销量</a>
                </li>
            </ul>
            <!--右侧分类-->
            <div id="loadding" class="loadding">
                <img th:src="@{/tradecenter/images/loadding.gif}" alt="" />
            </div>
            <ul id="product_list" class="datamart_list floating"></ul>

            <!-- 分页开始 -->
            <div id="pageTool"></div>
            <!-- 分页结束 -->
        </div>
    </section>



    <!--页脚-->
    <footer th:replace="layout/footer"></footer>
    <!--页脚结束-->
    <script th:src="@{/tradecenter/js/query.js}"></script>
    <script th:src="@{/tradecenter/js/paging.js}"></script>
    <script th:src="@{/tradecenter/js/pagedata.js}"></script>

    <!-- 数据包产品tpml模板 -->
    <script id="tmpl_products" type="text/x-jquery-tmpl">
        {{each(i,prod) list}}
        <li>
            <a href="/datamart/detail/${prod.id}" class="list_img" style="background:url(${prod.pic}) no-repeat center center;background-size:cover;"> </a>
            <div class="list_main">
                <a href="/datamart/detail/${prod.id}" class="list_title">${prod.designation}</a>
                <div class="list_con">${prod.introduce}</div>
                <p class="list_bot floating">
                    <span class="lf"> <i></i> 文件，个人，100M以下</span>
                    <span class="rt free">免费</span>
                </p>
            </div>
        </li>
        {{/each}}
    </script>

    <script th:inline="javascript">
        // 页面请求参数
        var settings = {
            url: "/api/product",            // 请求地址
            tmpl_id: "#tmpl_products" ,     // jquery template 模板元素，如：#div_id 或 .class_name
            target: "#product_list" ,       // 替换html元素，如：#div_id 或 .class_name
            pager_id: "#pageTool",           // 分页html元素标签
            params: [{key:"dataType",value:[[${currentid}]] }]
        }

        // 初始化数据
        pageData.products(settings) ;

        pageData.active(settings) ;
    </script>
</body>
</html>